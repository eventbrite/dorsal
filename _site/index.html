<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="A client-side JavaScript boilerplate automation system">
    <title>Dorsal</title>

    <link rel="canonical" href="https://eventbrite.github.io/dorsal/">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>


  <body>

    <div class="wrapper">

      <header>
  <h1>Dorsal</h1>
  <p>A client-side JavaScript boilerplate automation system</p>

  <p class="view"><a href="https://github.com/eventbrite/dorsal">View the Project on GitHub <small>eventbrite/dorsal</small></a></p>


  <ul>
    <li><a href="https://github.com/eventbrite/dorsal/zipball/master">Download <strong>ZIP File</strong></a></li>
    <li><a href="https://github.com/eventbrite/dorsal/tarball/master">Download <strong>TAR Ball</strong></a></li>
    <li><a href="https://github.com/eventbrite/dorsal">View On <strong>GitHub</strong></a></li>
  </ul>
</header>


      <section>

        <h1 id="dorsal">Dorsal</h1>
<p><a href="https://travis-ci.org/eventbrite/dorsal"><img src="https://travis-ci.org/eventbrite/dorsal.svg" alt="Build Status" /></a> <a href="http://badge.fury.io/js/dorsal"><img src="https://badge.fury.io/js/dorsal.svg" alt="NPM version" /></a> <a href="https://codeclimate.com/github/eventbrite/dorsal"><img src="https://codeclimate.com/github/eventbrite/dorsal.png" alt="Code Climate" /></a></p>

<h2 id="what-is-it">What is it?</h2>

<p>TL;DR: An HTML decorator library.</p>

<p>Want to use JavaScript without writing it? Want your team to be able to use your BackboneJS or JavaScript components without manually initializing them? Well you and your team should use Dorsal!</p>

<p>Dorsal swims around your DOM in search of HTML that’s hungry for delicious, delicious JavaScript. Dorsal scoops up those DOM elements and wires them up just by applying one class to your HTML. We were inspired by the directives system in Angular and wanted to bring something similar to our frontend stack here at Eventbrite.</p>

<p>Dorsal is platform agnostic, has no dependencies, and has been tested to work with IE8+, Firefox, Safari, and Chrome.</p>

<h3 id="setup">Setup</h3>

<p>Dorsal is compatible with AMD, CommonJS, and namespaces.</p>

<ul>
  <li>CommonJS/Node: <code>require('dorsal')</code></li>
  <li>AMD: <code>require('node_modules/dorsal/dist/dorsal')</code></li>
  <li>Namespaces: <code>window.Dorsal</code> after adding src/dorsal.js as a script</li>
</ul>

<p>Installation is easiest using npm: <code>npm install dorsal --save</code></p>

<h2 id="api">API</h2>

<h3 id="register-a-plugin">Register a plugin</h3>

<p>The following is an example of a plugin and its usage. We define a Dorsal plugin named <code>hello-world</code>. Once <code>wire</code> is called Dorsal will query for <code>.js-d-hello-world</code> in the DOM and all occurances will be initialized.</p>

<pre><code>&lt;div class='js-d-hello-world'&gt;&lt;/div&gt;

&lt;script&gt;
    Dorsal.registerPlugin('hello-world', function(options) {
        console.log(this === options.el); // true

        options.el.innerHTML = 'Hello World';
    });

    Dorsal.wire()
&lt;/script&gt;
</code></pre>

<h3 id="wiring">Wiring</h3>

<p>You don’t need to wire your whole page. <code>Dorsal.wire()</code> accepts an element as an optional argument. If no element is provided it will use <code>document</code> as the parent and find all occurances within it.</p>

<pre><code>&lt;div class='js-d-other-plugin'&gt;&lt;/div&gt;

&lt;div class='some-arbitrary-parent-selector'&gt;
    &lt;div class='js-d-hello-world'&gt;&lt;/div&gt;
    &lt;div class='js-d-hello-world'&gt;&lt;/div&gt;
    &lt;div class='js-d-hello-world'&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
    // if using jquery
    Dorsal.wire($('.js-d-other-plugin').get(0));
    Dorsal.wire($('.some-arbitrary-parent-selector').get(0));
&lt;/script&gt;
</code></pre>

<h3 id="unwiringrewiring">Unwiring/Rewiring</h3>

<p>Sometimes you’ll want to rewire something if it changes dynamically and your plugin can’t account for that. In that case, you should use rewire.</p>

<pre><code>&lt;div class='js-lorem-1 js-d-lorem' data-xd-wired="lorem"&gt;Lorem yay&lt;/div&gt;

&lt;div class='js-lorem-2 js-d-lorem' data-xd-wired="lorem"&gt;Lorem yay&lt;/div&gt;

&lt;script&gt;
    // disable the first lorem
    Dorsal.unwire($('.js-lorem-1').get(0), 'lorem');

    // change the type of the second lorem to bacon
    $('.js-lorem-2').data('d-type', 'bacon');
    // replaces lorem ipsum with bacon ipsum
    Dorsal.rewire($('.js-lorem-2').get(0), 'lorem');
&lt;/script&gt;
</code></pre>

<h3 id="deferred-promises">Deferred Promises</h3>

<p>Dorsal plugins run asynchronously, preventing too much blocking on the page. To more easily determine when it completes, Dorsal returns a jQuery compatible <a href="http://promises-aplus.github.io/promises-spec/">deferred promise</a> from the <code>Dorsal.wire()</code> and <code>Dorsal.rewire()</code> functions. Every plugin that runs will trigger a progress notification, providing the plugin’s return value to all registered progress handlers. The promise will resolve once all plugins have been processed, triggering the done handlers.</p>

<pre><code>&lt;script&gt;
    Dorsal.wire()
        .progress(function(pluginName, pluginResponse, dorsal) {
            alert('Plugin "' + pluginName + '" completed!');
        })
        .done(function(dorsal) {
            alert('Dorsal completed!');
        });
&lt;/script&gt;
</code></pre>

<h3 id="arguments-and-data-attributes">Arguments and Data Attributes</h3>

<p>Sometimes you will want to pass options to your selectors. In such cases you can use data attributes.</p>

<pre><code>&lt;div
    class='js-d-hello-world'
    data-d-non-standard-hello-variant='bacon'
    data-d-prefix='Ohhhh, '
&gt;&lt;/div&gt;

&lt;script&gt;
    Dorsal.registerPlugin('hello-world', function(options) {
        console.log(options.data.nonStandardHelloVariant); // bacon

        var helloMap = [
                bacon: 'Bacon world',
                default: 'Hello world'
            ],
            variant = options.nonStandardHelloVariant || 'default',
            prefix = options.data.prefix || '';

        options.el.innerHTML = prefix + helloMap[variant];
    });

    Dorsal.wire()
&lt;/script&gt;
</code></pre>

<h2 id="examples">Examples</h2>

<p>See it in action by opening <code>examples/lorem.html</code>. This use case automatically inserts Lorem ipsum wherever a <code>.js-d-lorem</code> class is used.</p>

<h2 id="license">License</h2>

<p>Copyright 2014 Eventbrite</p>

<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<p>http://www.apache.org/licenses/LICENSE-2.0</p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

<p>See LICENSE.md.</p>



      </section>

      <footer>
  <p>This project is maintained by <a href="https://github.com/eventbrite">eventbrite</a></p>
  <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
</footer>


    </div>

  </body>
</html>
