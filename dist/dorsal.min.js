!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.Dorsal=b()}(this,function(){var a=function(){};a.prototype.VERSION="0.0.1",a.prototype.CSS_PREFIX=".js-d-",a.prototype.DATA_PREFIX="d",a.prototype.registerPlugin=function(a,b){this.plugins||(this.plugins={}),this.plugins[a]=b},a.prototype.unregisterPlugin=function(a){delete this.plugins[a]},a.prototype._getDatasetAttributes=function(a){var b=a.dataset,c={};for(key in b)if(new RegExp("^"+this.DATA_PREFIX+"[A-Z]").test(key)){var d=key.substr(this.DATA_PREFIX.length),e=d[0].toLowerCase()+d.substr(1);c[e]=b[key]}return c},a.prototype._getDataAttributes=function(a){var b={},c=a.attributes,d=c.length,e="name",f=0;for(f=0;d>f;f++)if(new RegExp("^data-"+this.DATA_PREFIX+"-").test(c[f][e])){var g=c[f][e].substr(5+this.DATA_PREFIX.length+1).toLowerCase().replace(/(\-[a-zA-Z])/g,function(a){return a.toUpperCase().replace("-","")});b[g]=c[f].value}return b},a.prototype._getAttributes=function(a){return a.dataset?this._getDatasetAttributes(a):this._getDataAttributes(a)},a.prototype._runPlugin=function(a,b){var c=this._getAttributes(b);a.call(b,{el:b,data:c})},a.prototype.wire=function(a){if(!this.plugins)throw new Error("No plugins registered with Dorsal");for(var b,c,d=Object.keys(this.plugins),e=0,f=0,g=d.length,a=a||document;g>e;e++)for(c=this.CSS_PREFIX+d[e],b=a.querySelectorAll(c),a!==document&&a.className.indexOf(c.substr(1))>-1&&this._runPlugin(this.plugins[d[e]],a),f=0;f<b.length;f++)this._runPlugin(this.plugins[d[e]],b[f])};var b=new a;return b.create=function(){return new a},b});