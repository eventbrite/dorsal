/**
 * @license
 * Copyright 2014 Eventbrite
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*! dorsal - v0.3.3 - 2014-06-27 */
!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.Dorsal=b()}(this,function(){var a=function(){};a.prototype.VERSION="0.3.3",a.prototype.CSS_PREFIX=".js-d-",a.prototype.DATA_PREFIX="d",a.prototype.registerPlugin=function(a,b){this.plugins||(this.plugins={}),this.plugins[a]=b},a.prototype.unregisterPlugin=function(a){delete this.plugins[a]},a.prototype._getDatasetAttributes=function(a){var b=a.dataset,c={};for(var d in b)if(new RegExp("^"+this.DATA_PREFIX+"[A-Z]").test(d)){var e=d.substr(this.DATA_PREFIX.length),f=e[0].toLowerCase()+e.substr(1);c[f]=b[d]}return c},a.prototype._normalizeDataAttribute=function(a){return a.toUpperCase().replace("-","")},a.prototype._getDataAttributes=function(a){var b={},c=a.attributes,d=c.length,e="name",f=0;for(f=0;d>f;f++)if(new RegExp("^data-"+this.DATA_PREFIX+"-").test(c[f][e])){var g=c[f][e].substr(5+this.DATA_PREFIX.length+1).toLowerCase().replace(/(\-[a-zA-Z])/g,this._normalizeDataAttribute);b[g]=c[f].value}return b},a.prototype._getAttributes=function(a){return a.dataset?this._getDatasetAttributes(a):this._getDataAttributes(a)},a.prototype._runPlugin=function(a,b){var c=this._getAttributes(b);a.call(b,{el:b,data:c})},a.prototype._wirePlugin=function(a,b){var c=this;window.setTimeout(function(){var d=c.CSS_PREFIX+a,e=b.querySelectorAll(d);b!==document&&b.className.indexOf(d.substr(1))>-1&&c._runPlugin(c.plugins[a],b);for(var f,g=0;f=e[g];g++)c._runPlugin(c.plugins[a],f)},0)},a.prototype.wire=function(a){if(!this.plugins)throw new Error("No plugins registered with Dorsal");for(var b=Object.keys(this.plugins),c=0,d=b.length,a=a||document;d>c;c++)this._wirePlugin(b[c],a)};var b=new a;return b.create=function(){return new a},b});